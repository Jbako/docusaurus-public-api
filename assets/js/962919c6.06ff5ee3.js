"use strict";(self.webpackChunkdocusaurus_public_api=self.webpackChunkdocusaurus_public_api||[]).push([[818],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),u=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?o.createElement(f,i(i({ref:t},l),{},{components:n})):o.createElement(f,i({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1331:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:32,title:"Webhooks",description:"Servicio de notificaciones pagos de documentos",slug:"/pagos/webhooks",tags:["webhooks"]},i="Webhooks pagos",s={unversionedId:"Clientes/Webhooks relacionado",id:"version-PE/Clientes/Webhooks relacionado",title:"Webhooks",description:"Servicio de notificaciones pagos de documentos",source:"@site/versioned_docs/version-PE/Clientes/Webhooks relacionado.md",sourceDirName:"Clientes",slug:"/pagos/webhooks",permalink:"/docusaurus-public-api/PE/pagos/webhooks",draft:!1,tags:[{label:"webhooks",permalink:"/docusaurus-public-api/PE/tags/webhooks"}],version:"PE",sidebarPosition:32,frontMatter:{sidebar_position:32,title:"Webhooks",description:"Servicio de notificaciones pagos de documentos",slug:"/pagos/webhooks",tags:["webhooks"]},sidebar:"tutorialSidebar",previous:{title:"Pagos",permalink:"/docusaurus-public-api/PE/pagos"},next:{title:"Atributos din\xe1micos",permalink:"/docusaurus-public-api/PE/atributos-dinamicos"}},c={},u=[{value:"Esructura JSON",id:"esructura-json",level:2},{value:"Par\xe1metros",id:"par\xe1metros",level:4}],l={toc:u};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"webhooks-pagos"},"Webhooks pagos"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Para consumir los recursos notificados, se debe usar ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bsale.io")," como ",(0,r.kt)("strong",{parentName:"p"},"url base"))),(0,r.kt)("h2",{id:"esructura-json"},"Esructura JSON"),(0,r.kt)("p",null,"Cada vez que en Bsale se ejecuta una acci\xf3n sobre la informaci\xf3n asociada a un pago, recibir\xe1s una notificaci\xf3n. En el caso en el que se cree un pago o se elimine recibir\xe1s el siguiente Json"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "cpnId": 8849,\n    "resource": "/v1/payments/3229.json",\n    "resourceId": "3229",\n    "topic": "payment",\n    "action": "post",\n    "send": 1646914861\n}\n')),(0,r.kt)("h4",{id:"par\xe1metros"},"Par\xe1metros"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"cpnId"),", Identificador de la instancia en la cual se gener\xf3 la acci\xf3n (Empresa)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"resource"),", Indicar\xe1 donde puedes obtener el detalle del recurso que se notific\xf3"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"resourceId"),", Identificador \xfanico del recurso"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"topic"),", Informaci\xf3n respecto del tipo de recurso modificado, en este caso un documento."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"action"),", Identifica el tipo de acci\xf3n en este caso es un POST por lo que se est\xe1 informando la creaci\xf3n de un documento."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"officeId"),", En esta modificaci\xf3n se agrega el campo officeId, de manera de informar en la llamada de que sucursal se trata, esto para facilitar la identificaci\xf3n si corresponde o no ejecutar alguna tarea.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Es muy importante destacar que podr\xe1n obtener el objeto ",(0,r.kt)("inlineCode",{parentName:"p"},"document"),", pero con los datos de stock disponible de cada variante incluida. Esto es de mucha utilidad cuando uno quiere mantener actualizado el inventario en un sistema externo. En este caso tendremos que:"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"resource"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /v2/stocks/documents/14417.json"),"\nsi requieres s\xf3lo el stock de una sucursal en particular ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /v2/stocks/documents/14417.json?office=2"))))}p.isMDXComponent=!0}}]);