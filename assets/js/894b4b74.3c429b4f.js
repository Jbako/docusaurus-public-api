"use strict";(self.webpackChunkdocusaurus_public_api=self.webpackChunkdocusaurus_public_api||[]).push([[9508],{3905:(e,t,o)=>{o.d(t,{Zo:()=>l,kt:()=>m});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=n.createContext({}),u=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(o),m=r,f=p["".concat(c,".").concat(m)]||p[m]||d[m]||a;return o?n.createElement(f,i(i({ref:t},l),{},{components:o})):n.createElement(f,i({ref:t},l))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=o[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},8184:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var n=o(7462),r=(o(7294),o(3905));const a={sidebar_position:14,title:"Webhooks",description:"Servicio de notificaciones de documentos",slug:"/documentos/webhooks",tags:["webhooks"]},i="Webhooks documentos",s={unversionedId:"Documentos/Webhooks relacionado",id:"version-PE/Documentos/Webhooks relacionado",title:"Webhooks",description:"Servicio de notificaciones de documentos",source:"@site/versioned_docs/version-PE/Documentos/Webhooks relacionado.md",sourceDirName:"Documentos",slug:"/documentos/webhooks",permalink:"/docusaurus-public-api/PE/documentos/webhooks",draft:!1,tags:[{label:"webhooks",permalink:"/docusaurus-public-api/PE/tags/webhooks"}],version:"PE",sidebarPosition:14,frontMatter:{sidebar_position:14,title:"Webhooks",description:"Servicio de notificaciones de documentos",slug:"/documentos/webhooks",tags:["webhooks"]},sidebar:"tutorialSidebar",previous:{title:"Devoluciones",permalink:"/docusaurus-public-api/PE/devoluciones"},next:{title:"Productos y servicios",permalink:"/docusaurus-public-api/PE/productos-y-servicios"}},c={},u=[{value:"Esructura JSON",id:"esructura-json",level:2},{value:"Par\xe1metros",id:"par\xe1metros",level:4}],l={toc:u};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"webhooks-documentos"},"Webhooks documentos"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Para consumir los recursos notificados, se debe usar ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bsale.io")," como ",(0,r.kt)("strong",{parentName:"p"},"url base"))),(0,r.kt)("h2",{id:"esructura-json"},"Esructura JSON"),(0,r.kt)("p",null,"Cada vez que en Bsale se genere un documento recibir\xe1s una notificaci\xf3n POST a la URL que definiste con la siguiente estructura:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "cpnId": 2,\n   "resource": "/documents/14417.json",\n   "resourceId": "14417",\n   "topic": "document",\n   "action": "post",\n   "officeId": "2"\n}\n')),(0,r.kt)("h4",{id:"par\xe1metros"},"Par\xe1metros"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"cpnId"),", Identificador de la instancia en la cual se gener\xf3 la acci\xf3n (Empresa)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"resource"),", Indicar\xe1 donde puedes obtener el detalle del recurso que se notific\xf3"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"resourceId"),", Identificador \xfanico del recurso"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"topic"),", Informaci\xf3n respecto del tipo de recurso modificado, en este caso un documento."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"action"),", Identifica el tipo de acci\xf3n en este caso es un POST por lo que se est\xe1 informando la creaci\xf3n de un documento."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"officeId"),", En esta modificaci\xf3n se agrega el campo officeId, de manera de informar en la llamada de que sucursal se trata, esto para facilitar la identificaci\xf3n si corresponde o no ejecutar alguna tarea.")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Es muy importante destacar que podr\xe1n obtener el objeto ",(0,r.kt)("inlineCode",{parentName:"p"},"document"),", pero con los datos de stock disponible de cada variante incluida. Esto es de mucha utilidad cuando uno quiere mantener actualizado el inventario en un sistema externo. En este caso tendremos que:"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"resource"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /v2/stocks/documents/14417.json"),"\nsi requieres s\xf3lo el stock de una sucursal en particular ",(0,r.kt)("inlineCode",{parentName:"p"},"GET /v2/stocks/documents/14417.json?office=2"))))}d.isMDXComponent=!0}}]);